# 非機能要件定義書

## 1. パフォーマンス要件

### 1.1 応答時間
- **支出登録処理**：3秒以内
- **画面遷移**：1秒以内
- **データ取得・表示**：2秒以内
- **グラフ・レポート生成**：5秒以内

### 1.2 スループット
- **同時利用者数**：2名（夫婦）+ α（将来拡張考慮）
- **データ処理量**：月間1,000件の支出データ処理

### 1.3 リソース使用量
- **モバイルデータ通信量**：月間100MB以下
- **ローカルストレージ**：50MB以下（キャッシュ含む）

## 2. セキュリティ要件

### 2.1 データ保護
- **暗号化**
  - 通信データ：HTTPS/TLS 1.3以上
  - 保存データ：AES-256による暗号化
- **アクセス制御**
  - 夫婦間でのデータ共有権限管理
  - 認証機能（ログイン）の実装

### 2.2 プライバシー保護
- **個人情報の最小化**
  - 必要最小限の個人情報のみ収集
  - 家計データの外部流出防止
- **データ保持期間**
  - ユーザー削除時の完全データ削除
  - 不要ログの定期削除

### 2.3 セキュリティ監査
- **脆弱性対策**
  - 定期的なセキュリティアップデート
  - 外部ライブラリの脆弱性チェック

## 3. 可用性・信頼性要件

### 3.1 システム可用性
- **稼働率**：99.5%以上（年間ダウンタイム43.8時間以下）
- **障害復旧時間**：4時間以内

### 3.2 データ信頼性
- **データ整合性**：100%（データ損失なし）
- **バックアップ**：クラウドプロバイダの標準バックアップ機能を利用
- **データ同期**：リアルタイム同期（遅延1秒以内）

### 3.3 障害対応
- **エラーハンドリング**
  - ネットワーク切断時のローカル保存
  - 復旧時の自動同期機能
- **ユーザー通知**
  - システム障害時の適切なエラーメッセージ表示

## 4. ユーザビリティ要件

### 4.1 操作性
- **直感的操作**
  - 3タップ以内で支出登録完了
  - 明確なナビゲーション構造
- **学習容易性**
  - 初回利用時の簡単なチュートリアル
  - ヘルプ機能の提供

### 4.2 アクセシビリティ
- **フォントサイズ**：拡大縮小対応
- **色彩**：色弱者への配慮（コントラスト比4.5:1以上）
- **タッチ操作**：最小タッチ範囲44px×44px

## 5. 互換性・対応環境

### 5.1 対応デバイス
- **スマートフォン**
  - iOS 15.0以上
  - Android 8.0以上
- **PC**
  - Windows 10以上
  - macOS 12.0以上
  - 主要ブラウザ対応（Chrome、Safari、Firefox、Edge）

### 5.2 ネットワーク環境
- **オンライン機能**：4G/5G/Wi-Fi対応
- **オフライン機能**：一時的なデータ保存（同期は接続時）

## 6. 拡張性・保守性要件

### 6.1 システム拡張性
- **ユーザー数拡張**：将来的な多世帯対応
- **機能拡張**：クレジットカード連携、銀行連携などの追加機能
- **データ量拡張**：年間数万件のデータ処理に対応

### 6.2 保守性
- **コード品質**
  - TypeScript使用による型安全性
  - ESLint/Prettierによるコード規約統一
- **テスト**
  - 単体テストカバレッジ80%以上
  - 主要機能の結合テスト実装
- **ドキュメント**
  - API仕様書の維持
  - 運用マニュアルの整備

## 7. 技術要件

### 7.1 技術スタック
- **フロントエンド**：Next.js + TypeScript
- **バックエンド/データベース**：Supabase
- **認証**：Supabase Auth
- **ホスティング**：Vercel

### 7.2 外部サービス連携
- **メール通知取込**
  - Gmail API連携（n8n）
  - メール解析によるデータ抽出

## 8. 法的・コンプライアンス要件

### 8.1 個人情報保護
- **個人情報保護法**への準拠
- **プライバシーポリシー**の明示

### 8.2 利用規約
- **サービス利用規約**の策定
- **免責事項**の明記

## 9. 運用・監視要件

### 9.1 ログ管理
- **アプリケーションログ**：エラー、パフォーマンス情報
- **アクセスログ**：利用状況の把握
- **ログ保持期間**：3ヶ月

### 9.2 監視・アラート
- **パフォーマンス監視**：応答時間、エラー率
- **リソース監視**：CPU、メモリ、ストレージ使用量
- **アラート通知**：重要障害時の即座通知